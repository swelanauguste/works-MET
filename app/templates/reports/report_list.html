{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block content %}
<div class="p-2">
    <form action="{% url 'report-create' %}"
        method="post">
        <span class="d-xl-inline-flex"
            style="overflow: auto; overflow-y: hidden;">
            {% csrf_token %}
            {{form|crispy}}
        </span>
        <div class="text-end">
            <button type="submit"
                class="btn btn-dark">Submit</button>
        </div>
    </form>
    <div class="pagination my-2">
        <span class="step-links">
            {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ page_obj.number }} of
                {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
    <div class="table-responsive">
        <table class="table table-hover table-sm small">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">st</th>
                    <th scope="col">date</th>
                    <th scope="col">time</th>
                    <th scope="col">vis</th>
                    <th scope="col">t_cld</th>
                    <th scope="col">dd</th>
                    <th scope="col">fff</th>
                    <th scope="col">temp</th>
                    <th scope="col">dp</th>
                    <th scope="col">vp</th>
                    <th scope="col">rh</th>
                    <th scope="col">msl</th>
                    <th scope="col">qnh</th>
                    <th scope="col">w</th>
                    <th scope="col">ww</th>
                    <th scope="col">t_lcld</th>
                    <th scope="col">cld</th>
                    <th scope="col">low</th>
                    <th scope="col">mid</th>
                    <th scope="col">high</th>
                    <th scope="col">high2</th>
                    <th scope="col">max</th>
                    <th scope="col">min</th>
                    <th scope="col">rr</th>
                    <th scope="col">tt_time</th>
                    <th scope="col"><span class="material-symbols-outlined">
                            more_vert
                        </span></th>
                    <th scope="col"><span class="material-symbols-outlined">
                            delete
                        </span></th>
                </tr>
            </thead>
            <tbody>
                {% for ob in page_obj %}
                <tr>
                    <th scope="row">{{forloop.counter}}</th>
                    <td><a class="text-dark"
                            href="{% url 'report-detail' ob.pk %}">{{ob.st}}</a>
                    </td>
                    <td><a class="text-dark"
                            href="{% url 'report-detail' ob.pk %}">{{ob.date|date:"Y-M-d"}}</a>
                    </td>
                    <td>{{ob.time|date:"H:i"}}</td>
                    <td>{{ob.vis}}</td>
                    <td>{{ob.t_cld}}</td>
                    <td>{{ob.dd}}</td>
                    <td>{{ob.fff}}</td>
                    <td>{{ob.temp}}</td>
                    <td>{{ob.dp}}</td>
                    <td>{{ob.vp}}</td>
                    <td>{{ob.rh}}</td>
                    <td>{{ob.msl}}</td>
                    <td>{{ob.qnh}}</td>
                    <td>{{ob.w}}</td>
                    <td>{{ob.ww}}</td>
                    <td>{{ob.t_lcld}}</td>
                    <td>{{ob.cld}}</td>
                    <td>{{ob.low}}</td>
                    <td>{{ob.mid}}</td>
                    <td>{{ob.high}}</td>
                    <td>{{ob.high2}}</td>
                    <td>{{ob.maxx}}</td>
                    <td>{{ob.minn}}</td>
                    <td>{{ob.rr}}</td>
                    <td>{{ob.rr_time|date:"H:i"}}</td>
                    <td><a class="text-primary"
                            href="{% url 'report-detail' ob.pk %}"><span
                                class="material-symbols-outlined">
                                more_vert
                            </span></a></td>
                    <td><a class="text-danger"
                            href="{% url 'report-delete' ob.pk %}"><span
                                class="material-symbols-outlined">
                                delete
                            </span></a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="pagination my-2">
        <span class="step-links">
            {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ page_obj.number }} of
                {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
    <div class="container-fluid">
        {{chart|safe}}

    </div>
</div>

{% endblock content %}